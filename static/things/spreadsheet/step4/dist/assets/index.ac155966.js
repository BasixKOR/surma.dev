import{v,p as p$1,l,S}from"./vendor.fa6e9238.js";const p=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}};p();function range(t){return Array.from({length:t},(r,o)=>o)}function spreadsheetColumn(t){return String.fromCharCode("A".charCodeAt(0)+t)}class SpreadsheetData{constructor(t,r){this.rows=t,this.cols=r,this.cells=Array.from({length:r*t},()=>({value:0,computedValue:0}))}getCell(t,r){return this.cells[r*this.cols+t]}generateCode(t,r){return`(function () {
      return ${this.getCell(t,r).value};
    })();`}computeCell(x,y){const cell=this.getCell(x,y);let result;try{result=eval(this.generateCode(x,y))}catch(t){result=`#ERROR ${t.message}`}cell.computedValue=result}computeAllCells(){for(const t of range(this.rows))for(const r of range(this.cols))this.computeCell(r,t)}}function useSpreadsheetData(t,r){const[{data:o},u]=p$1(({data:e},{x:n,y:s,value:a})=>{const c=e.getCell(n,s);return c.value=a,e.computeAllCells(),{data:e}},{data:new SpreadsheetData(t,r)});return[o,u]}function Spreadsheet({rows:t,cols:r}){const[o,u]=useSpreadsheetData(t,r);return v("table",null,v("tr",null,v("td",null),range(r).map(e=>v("td",null,spreadsheetColumn(e)))),range(t).map(e=>v("tr",null,v("td",null,e),range(r).map(n=>v("td",null,v(Cell,{x:n,y:e,cell:o.getCell(n,e),set:s=>u({x:n,y:e,value:s})}))))))}function Cell({x:t,y:r,cell:o,set:u}){const[e,n]=l(!1);return e?v("input",{type:"text",value:o.value,onblur:s=>{n(!1),u(s.target.value)}}):v("span",{onclick:()=>n(!0)},o.computedValue)}const main=document.querySelector("main");S(v(Spreadsheet,{rows:10,cols:10}),main);
