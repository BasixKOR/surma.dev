<!DOCTYPE html>
<style>
  [data-type="lens"] .lens {
    stroke: hsla(240, 100%, 50%, 0.6);
    fill: hsla(240, 100%, 50%, 0.2);
  }
  [data-type="lens"] .lensplane {
    stroke: hsla(0, 0%, 0%, 0.4);
    stroke-dasharray: 4 1;
  }
</style>
<div id="target"></div>
<script type="importmap">
  {
    "imports": {
      "lit1.3.0/": "/node_modules/lit1.3.0/"
    }
  }
</script>
<script type="module">
  import {Lens, Point, instantiateDiagram} from "./geometry.js";

  const { target } = document.all;

  const diagram = {
    width: 500,
    height: 500,
    viewBox: {
      leftX: -250,
      rightX: 250,
      topY: -250,
      bottomY: 250,
    },
    handles: {
      p: new Point(200, 20).setName("p"),
      fp: new Point(50, 0).setName("fp"),
    },
    recalculate() {
      this.handles.fp.y = 0;
      const lens = new Lens(new Point(0, 0), this.handles.fp, 150).setName(
        "lensplane"
      );
      const projection = lens.lensProject(this.handles.p);
      projection.point.setName("p'");
      return [...Object.values(projection), lens];
    },
  };

  
  instantiateDiagram(diagram, target);
</script>
